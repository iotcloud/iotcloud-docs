Architecture
============

The generic architecture for connecting the IoT devices to cloud has being much discussed in the literature. These reference architectures consist of a distributed set of nodes to collect the data from the devices (Gateways) and a messaging layer to transmit this data to cloud services. The data is transformed and processed in the cloud both in real time and after storage. The main source of data can be abstracted as Wireless Sensor Networks. The wireless sensor networks (WSN) and IoT devices are connected to gateways. These gateways relay the data generated by the WSNs and devices to the Cloud Services using Publish-Subscribe messaging. 

Figure {} shows the architecture of our IoTCloud platform which is similar to the proposed architecture in the literature. One key difference is the introduction of the Gateway master to manage the different gateways connected to the system. The data generated by the devices is being considered as an event stream. The events are published to a message broker layer which supports the publish-subscribe messaging. In the cloud a distributed stream processing engine is listening for the events from the message broker layer. The event streams are passed through this distributed stream processing layer before they are being stored for further analytics. Real time analytics of the data is done at the distributed stream processing layer. The data can be stored in a traditional database, distributed file system or a NoSQL databases. 
The publish-subscribe messaging system is pluggable at the Gateway and Cloud Processing layers allowing the applications to use the most suitable message semantics.

